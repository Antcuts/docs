(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{100:function(e,t,n){"use strict";var i=n(36);n.n(i).a},101:function(e,t){"undefined"===typeof window.TanmerJS&&(window.TanmerJS={}),window.TanmerJS.unloadSwitch=!1,window.TanmerJS.on_current_page=function(e,t,n){var i=$("body");"object"!=typeof e&&(e=new Array(e)),"object"!=typeof t&&(t=new Array(t)),e.includes(i.data("controller"))&&t.includes(i.data("action"))&&n(i)},window.TanmerJS.Fullscreen={enter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if("undefined"!=typeof window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!=n&&n.SendKeys("{F11}")}},exit:function(){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;if(e)e.call(document);else if("undefined"!==typeof window.ActiveXObject){var t=new ActiveXObject("WScript.Shell");null!==t&&t.SendKeys("{F11}")}}},Object.defineProperty(window.TanmerJS.Fullscreen,"entered",{get:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}}),window.resizeChart=function(e){$(window).resize((function(){e.resize()}))},window.onLinkReTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";$(e).find("a").on("click",(function(e){e.preventDefault();var n=$(this).attr("href");n&&window.open(n,t)}))},window.onLockUpForm=function(e){$(e).on("submit",(function(e){return!1}))},window.onLockLink=function(e){$(e).on("click",(function(e){return e.preventDefault(),!1}))}},112:function(e,t,n){"use strict";n(172),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(200),n(201),n(96),n(202),n(203),n(204),n(205),n(206),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(232),n(233),n(234),n(235),n(236),n(237),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(306),n(308),n(309),n(310),n(311),n(313),n(314),n(315),n(148),n(316),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(149),n(150);var i=n(1229);n(386),n(388);$&&$.notify&&($.notifyDefaults({type:"info",allow_dismiss:!0,z_index:1060,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},offset:{x:25,y:60},template:'<div data-notify="container" class="col-11 col-sm-6 col-md-5 col-lg-4 col-xl-3 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">\xd7</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'}),$.notify.success=function(e){$.notify(e,{type:"success"})},$.notify.error=function(e){$.notify(e,{type:"danger"})},$.notify.info=function(e){$.notify(e)});var a=n(9),o=n(8),s=n.n(o),r={name:"menu-form",props:{activeMenu:{type:Object,default:{}},activeRootMenu:{type:Object,default:{}},menus:{type:Array}},data:function(){return{}},computed:{disabledUrlInput:function(){return this.activeRootMenu.id===this.activeMenu.id&&this.activeRootMenu.children&&this.activeRootMenu.children.length>0}},methods:{onRemoveMenu:function(){confirm("\u662f\u5426\u5220\u9664\u6b64\u680f\u76ee\u5bfc\u822a\uff1f")&&this.$emit("removeMenu",this.activeMenu.id)},onAddMenu:function(){this.$emit("addMenu")}}},l=(n(98),n(5)),c=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"content"},[e.activeMenu&&e.activeMenu.id?n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label text-right",attrs:{for:"title"+e.activeMenu.id}},[e._v("\u5bfc\u822a\u540d\u79f0")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.title,expression:"activeMenu.title"}],staticClass:"form-control",attrs:{type:"text",id:"title"+e.activeMenu.id,placeholder:"\u540d\u79f0",maxlength:"20"},domProps:{value:e.activeMenu.title},on:{input:function(t){t.target.composing||e.$set(e.activeMenu,"title",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label text-right",attrs:{for:"url"+e.activeMenu.id}},[e._v("\u5bfc\u822a\u94fe\u63a5")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.url,expression:"activeMenu.url"}],staticClass:"form-control",attrs:{disabled:e.disabledUrlInput,type:"text",id:"url"+e.activeMenu.id,placeholder:"\u94fe\u63a5\u5730\u5740"},domProps:{value:e.activeMenu.url},on:{input:function(t){t.target.composing||e.$set(e.activeMenu,"url",t.target.value)}}}),e._v(" "),n("small",{directives:[{name:"show",rawName:"v-show",value:e.disabledUrlInput,expression:"disabledUrlInput"}],staticClass:"form-text text-muted"},[e._v("\u5b58\u5728\u5b50\u5bfc\u822a\u680f\u76ee\uff0c\u6b64\u680f\u76ee\u5730\u5740\u5c06\u65e0\u6548")])])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label text-right"},[e._v("\u65b0\u7a97\u53e3\u6253\u5f00")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.target,expression:"activeMenu.target"}],staticClass:"form-check-input",attrs:{type:"radio",name:"target-options",id:"target-"+e.activeMenu.id+"-on",value:"_blank"},domProps:{checked:e._q(e.activeMenu.target,"_blank")},on:{change:function(t){return e.$set(e.activeMenu,"target","_blank")}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"target-"+e.activeMenu.id+"-on"}},[e._v("\u662f")])]),e._v(" "),n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.target,expression:"activeMenu.target"}],staticClass:"form-check-input",attrs:{type:"radio",name:"target-options",id:"target-"+e.activeMenu.id+"-off",value:""},domProps:{checked:e._q(e.activeMenu.target,"")},on:{change:function(t){return e.$set(e.activeMenu,"target","")}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"target-"+e.activeMenu.id+"-off"}},[e._v("\u5426")])])])]),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-2 col-form-label text-right"},[e._v("\u662f\u5426\u9690\u85cf")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.disabled,expression:"activeMenu.disabled"}],staticClass:"form-check-input",attrs:{type:"radio",name:"disabled-options",id:"disabled-"+e.activeMenu.id+"-on",value:"true"},domProps:{checked:e._q(e.activeMenu.disabled,"true")},on:{change:function(t){return e.$set(e.activeMenu,"disabled","true")}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"disabled-"+e.activeMenu.id+"-on"}},[e._v("\u662f")])]),e._v(" "),n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.activeMenu.disabled,expression:"activeMenu.disabled"}],staticClass:"form-check-input",attrs:{type:"radio",name:"disabled-options",id:"disabled-"+e.activeMenu.id+"-off",value:"false"},domProps:{checked:e._q(e.activeMenu.disabled,"false")},on:{change:function(t){return e.$set(e.activeMenu,"disabled","false")}}}),e._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"disabled-"+e.activeMenu.id+"-off"}},[e._v("\u5426")])])])])]),e._v(" "),n("div",{staticClass:"col-2 text-right",staticStyle:{"min-widht":"120px"}},[n("button",{staticClass:"btn btn-sm btn-delete",on:{click:e.onRemoveMenu}},[e._v("\u5220\u9664\u5bfc\u822a")])])]):e._e(),e._v(" "),e.menus&&e.menus.length>0?e._e():n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:e.onAddMenu}},[e._v("+ \u6dfb\u52a0\u5bfc\u822a\u83dc\u5355")])])])])}),[],!1,null,"08128ef4",null).exports,u=n(90),d={name:"top_menus_preview",components:{draggable:n.n(u).a},props:{menus:{type:Array,required:!0},activeMenu:{type:Object},activeRootMenu:{type:Object},colors:{type:Object}},data:function(){return{newMenus:[]}},watch:{menus:{handler:function(e,t){this.newMenus=JSON.parse(JSON.stringify(this.menus||[]))},deep:!0}},computed:{contentStyle:function(){return{"padding-bottom":this.dropdownMenuHeight+"px","background-color":this.colors.headbg}},dropdownMenuHeight:function(){return 35*(this.activeRootMenu&&this.activeRootMenu.children||[]).length+86}},methods:{onClickMenu:function(e){this.$emit("selectMenu",e.id)},onAddMenu:function(){this.$emit("addMenu")},onAddChildMenu:function(e){this.$emit("addChildMenu",e.id)},onchangeMenus:function(e){this.$emit("sort",this.newMenus)}}},p=(n(99),Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content",style:e.contentStyle},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-dark",style:"width: max-content;min-width: 100%;background-color:"+e.colors.navbar},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("LOGO")]),e._v(" "),n("draggable",{staticClass:"navbar-nav mr-auto",attrs:{tag:"ul",draggable:".sort-item",handle:".sort-handle"},on:{end:e.onchangeMenus},model:{value:e.newMenus,callback:function(t){e.newMenus=t},expression:"newMenus"}},[e._l(e.newMenus,(function(t,i){return n("li",{key:i,staticClass:"nav-item dropdown sort-item",class:e.activeRootMenu&&(t.id===e.activeRootMenu.id?"active":null)},[n("span",{staticClass:"nav-link dropdown-toggle",on:{click:function(n){return e.onClickMenu(t)}}},[n("span",{staticClass:"iconfont icontuodong1 sort-handle"}),e._v("\n          "+e._s(t.title)+"\n        ")]),e._v(" "),n("div",{staticClass:"dropdown-menu",class:e.activeRootMenu&&(t.id===e.activeRootMenu.id?"show":null)},[n("draggable",{attrs:{draggable:".sort-child-item",handle:".sort-handle"},on:{end:e.onchangeMenus},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"menu.children"}},e._l(t.children,(function(i,a){return n("span",{key:a,staticClass:"dropdown-item d-flex align-items-center sort-child-item",class:e.activeMenu&&(i.id===e.activeMenu.id?"active":null),on:{click:function(n){return e.onClickMenu(i,t)}}},[n("span",{staticClass:"iconfont icontuodong1 sort-handle mr-2"}),e._v("\n              "+e._s(i.title)+"\n            ")])})),0),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.children&&t.children.length>0,expression:"menu.children && menu.children.length > 0"}],staticClass:"dropdown-divider"}),e._v(" "),n("span",{staticClass:"dropdown-item",on:{click:function(n){return e.onAddChildMenu(t)}}},[e._v("+ \u6dfb\u52a0\u5bfc\u822a")])],1)])})),e._v(" "),n("li",{staticClass:"nav-item active",attrs:{slot:"footer"},on:{click:e.onAddMenu},slot:"footer"},[n("span",{staticClass:"nav-link"},[e._v("+ \u6dfb\u52a0\u5bfc\u822a")])])],2)],1)])}),[],!1,null,"6b83b5cc",null).exports),f={name:"nav_menu_form",props:{data:{type:Array}},components:{MenuForm:c,TopMenusPreview:p},data:function(){return{colors:{navbar:"#03B598",headbg:""},activeId:null,activeMenu:null,activeRootMenu:null,menus:[]}},watch:{menus:{handler:function(e,t){!this.activeId&&e.length>0&&(this.activeId=e[0].id),this.$emit("change-menus",this.menus)},deep:!0},activeId:function(e){this.loadActiveMenuObj(e)}},methods:{loadActiveMenuObj:function(e){this.activeMenu=this.getMenu(e),this.activeRootMenu=this.getRootMenu(e)},getRootMenu:function(e){var t=null,n=!0,i=!1,a=void 0;try{for(var o,s=this.menus[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;if(r.id===e)t=r;else if(r.hasOwnProperty("children")){this.getMenu(e,r.children,!0)&&(t=r)}if(t)break}}catch(l){i=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t},getMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menus,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,a=!0,o=!1,s=void 0;try{for(var r,l=t[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var c=r.value;if(c.id===e?i=c:!n&&c.hasOwnProperty("children")&&(i=this.getMenu(e,c.children||[])),i)break}}catch(u){o=!0,s=u}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i},onSelectMenu:function(e){this.activeId=e},onAddMenu:function(){this.menus.push(this.genMenuData({children:[]}))},onAddChildMenu:function(e){var t=this.getMenu(e,this.menus,!0);t&&t.children.push(this.genMenuData())},setLastActiveMenu:function(){},onRemoveMenu:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menus,i=arguments.length>2?arguments[2]:void 0;n.forEach((function(a,o){if(a.id===e){n.splice(o,1),t.activeId=null;var s=n[0===o?0:o-1];t.activeId=s?s.id:i}else a.hasOwnProperty("children")&&t.onRemoveMenu(e,a.children||[],a.id)}))},genMenuData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:s()(),title:e.title||"\u5bfc\u822a\u83dc\u5355",url:e.url||"",disabled:e.disabled||!1,target:e.target||""},e.hasOwnProperty("children")?{children:e.children||[]}:null)},onSortMenu:function(e){var t=this;this.menus=e,this.$nextTick((function(){t.loadActiveMenuObj(t.activeId)}))},getData:function(){return this.filterData()},filterData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.menus,n=JSON.parse(JSON.stringify(t||[]));return n.forEach((function(t){delete t.id,t.hasOwnProperty("children")&&(t.children=e.filterData(t.children||[]))})),n},formatData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.map((function(t){var n=e.genMenuData(t);return t.hasOwnProperty("children")&&(n.children=e.formatData(t.children||[])),n}));return n},setDefaultMenus:function(e){e&&"object"===typeof e&&(this.menus=this.formatData(e))}},mounted:function(){}},v=Object(l.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("top-menus-preview",{attrs:{menus:e.menus,activeMenu:e.activeMenu,activeRootMenu:e.activeRootMenu,colors:e.colors},on:{selectMenu:e.onSelectMenu,addMenu:e.onAddMenu,addChildMenu:e.onAddChildMenu,sort:e.onSortMenu}}),e._v(" "),n("menu-form",{attrs:{activeMenu:e.activeMenu,activeRootMenu:e.activeRootMenu,menus:e.menus},on:{removeMenu:e.onRemoveMenu,addMenu:e.onAddMenu}})],1)}),[],!1,null,"6af5a666",null).exports,m=new(n(91).a),h={name:"string_input",props:{options:{type:Object,default:{}},namePrefix:{type:String}},data:function(){return{id:s()(),value:"",lastValue:""}},watch:{},computed:{name:function(){return this.namePrefix?"".concat(this.namePrefix,"[").concat(this.options.key,"]"):this.options.key}},methods:{onBlur:function(){this.lastValue!=this.value&&(this.lastValue=this.value,this.$emit("changed",this.value))}},mounted:function(){this.value=this.options.default,this.lastValue=this.value}},g=Object(l.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-group"},[n("label",{attrs:{for:e.id}},[e._v(e._s(e.options.name))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",attrs:{type:"text",name:e.name,id:e.id},domProps:{value:e.value},on:{blur:e.onBlur,input:function(t){t.target.composing||(e.value=t.target.value)}}})])}),[],!1,null,null,null).exports,y=n(37),_={name:"simple_upload_image",props:{defaultUrl:{type:String},blockStyle:{type:Object}},data:function(){return{id:s()(),fileUploader:null,image_url:"",encrypted_id:""}},watch:{defaultUrl:function(e,t){!t&&e&&this.fileUploader&&this.fileUploader.setDefault(e)}},mounted:function(){var e=this,t=e.$refs.imageUpload;t&&(e.fileUploader=new y.a({target:t,size:10,types:["image/*"],defaultUrl:e.defaultUrl,success:function(t,n){e.image_url=t,e.encrypted_id=n,e.$emit("success",{image_url:t,encrypted_id:n})},destroy:function(){e.image_url="",e.encrypted_id="",e.$emit("destroy")}}))}},b=Object(l.a)(_,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"imageUpload",style:this.blockStyle,attrs:{id:this.id}})}),[],!1,null,null,null).exports,w={name:"image_input",props:{options:{type:Object,default:{}},namePrefix:{type:String}},components:{SimplateUploadImage:b},computed:{name:function(){return this.namePrefix?"".concat(this.namePrefix,"[").concat(this.options.key,"]"):this.options.key}},data:function(){return{id:s()(),image_url:"",encrypted_id:""}},methods:{onUploadSuccess:function(e){var t=e.image_url,n=e.encrypted_id;this.image_url=t,this.encrypted_id=n;var i={key:this.id,image_url:t,encrypted_id:n};m.$emit("add-encrypted_id",i),this.$nextTick((function(){this.$emit("changed",i)}))},onDestroy:function(){this.image_url="",this.encrypted_id="",m.$emit("remove-encrypted_id",this.id),this.$nextTick((function(){this.$emit("changed")}))}},mounted:function(){this.image_url=this.options.default}},M=Object(l.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{attrs:{for:e.id}},[e._v(e._s(e.options.name))]),e._v(" "),n("input",{staticClass:"d-none",attrs:{type:"text",name:e.name,id:e.id},domProps:{value:e.image_url}}),e._v(" "),n("SimplateUploadImage",{staticClass:"w-100",attrs:{defaultUrl:e.image_url},on:{success:e.onUploadSuccess,destroy:e.onDestroy}})],1)}),[],!1,null,null,null).exports,k={name:"images_input",props:{options:{type:Object,default:{}},namePrefix:{type:String}},components:{SimplateUploadImage:b},computed:{name:function(){return this.namePrefix?"".concat(this.namePrefix,"[").concat(this.options.key,"][]"):"".concat(this.options.key,"[]")},canAdd:function(){var e=this.options.extra_options,t=(void 0===e?{}:e).max_length;return!t||this.arrayImages.length<Number(t)}},data:function(){return{id:s()(),arrayImages:[]}},methods:{onAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image_url,n=void 0===t?"":t;this.canAdd&&this.arrayImages.push({id:s()(),image_url:String(n),encrypted_id:""})},onUploadSuccess:function(e,t){var n=t.image_url,i=t.encrypted_id;e.image_url=n,e.encrypted_id=i,m.$emit("add-encrypted_id",e),this.$nextTick((function(){this.$emit("changed",this.arrayImages)}))},onDestroy:function(e,t){m.$emit("remove-encrypted_id",e.id),this.arrayImages.splice(t,1),this.$nextTick((function(){this.$emit("changed")}))},setDefault:function(){var e=this;this.arrayImages=[];var t=this.options.default;"object"==typeof t&&t.length>0?t.forEach((function(t){e.onAdd({image_url:t})})):this.onAdd()}},mounted:function(){this.setDefault()}},x=(n(100),Object(l.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"variable-images"},[n("label",{attrs:{for:e.id}},[e._v(e._s(e.options.name))]),e._v(" "),n("div",{staticClass:"row"},[e._l(e.arrayImages,(function(t,i){return n("div",{key:t.id,staticClass:"col-3 pb-3"},[t.image_url?n("input",{staticClass:"d-none",attrs:{type:"text",name:e.name},domProps:{value:t.image_url}}):e._e(),e._v(" "),n("SimplateUploadImage",{attrs:{blockStyle:{width:"100%"},defaultUrl:t.image_url},on:{success:function(n){return e.onUploadSuccess(t,n)},destroy:function(){return e.onDestroy(t,i)}}})],1)})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:this.canAdd,expression:"this.canAdd"}],staticClass:"col-3",on:{click:e.onAdd}},[e._m(0)])],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"variable-images__add"},[t("span",[this._v("+")]),this._v(" "),t("span",[this._v("\u6dfb\u52a0")])])}],!1,null,"f3b546f2",null).exports),C={name:"variables_to_form",props:{variables:{type:Array,default:[]},namePrefix:{type:String,default:""},autoSetEncryptedIds:{type:Boolean,default:!0}},components:{StringInputComponent:g,ImageInputComponent:M,ImagesInputComponent:x},data:function(){return{inputExample:null,inputData:null,encryptedIds:[]}},watch:{},computed:{encryptedIdsValue:function(){return this.encryptedIds.map((function(e){return e.encrypted_id}))}},methods:{getInputExample:function(e){var t=null;switch(e){case"string":t=g;break;case"image":t=M;break;case"array[image]":t=x}return t},onChanged:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("w34567890"),this.$emit("changed",{type:e,value:t})}},mounted:function(){var e=this;m.$on("add-encrypted_id",(function(t){var n=t.key,i=t.encrypted_id;e.encryptedIds||(e.encryptedIds=[]),e.encryptedIds.push({key:n,encrypted_id:i})})),m.$on("remove-encrypted_id",(function(t){e.encryptedIds=e.encryptedIds.filter((function(e){return e.key!=t}))}))}},S=Object(l.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.variables,(function(t,i){return n("div",{staticClass:"mb-4"},[n(e.getInputExample(t.type),{key:"component-input-"+i,tag:"component",attrs:{namePrefix:e.namePrefix,options:t},on:{changed:function(n){return e.onChanged(t.type,n)}}})],1)})),e._v(" "),e.autoSetEncryptedIds?n("input",{staticClass:"d-none",attrs:{type:"text",name:"encrypted_ids"},domProps:{value:e.encryptedIdsValue}}):e._e()],2)}),[],!1,null,"1acae4fd",null).exports;a.a.components={},a.a.components.NavMenuForm=a.a.component("nav-menu-form",v),a.a.components.VariablesToForm=a.a.component("variables-to-form",S);var I=n(58);a.a.use(I.a),$((function(){var e=new I.a.Store({state:{loading:!1}});$('[rel="vue"]').each((function(t,n){new a.a({el:n,store:e})}))}));var O=n(70),P=n.n(O);$((function(){var e=new P.a(".js-clipboard");function t(e,t){var n=$(e);n.attr({"data-toggle":"tooltip","data-placement":"auto",title:t}),n.tooltip("show"),n.on("hidden.bs.tooltip",(function(){n.tooltip("dispose")}))}e.on("success",(function(e){t(e.trigger,"\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\u4e2d")})),e.on("error",(function(e){t(e.trigger,"\u590d\u5236\u5931\u8d25")}))})),i.a({dsn:"https://976596050fd94f9eae0b8939faea85cb@sentry9.tanmer.cn/25",release:"77a1ae6b"})},1223:function(e,t,n){"use strict";n.r(t);n(112),n(101),n(151)},151:function(e,t){$((function(){window.onLinkReTarget(document.querySelector("[editorjs-pre-show]"))}))},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";var i=n(42);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=$(t.target),this.target&&this.target.length>0&&(this.success=t.success,this.destroy=t.destroy,this.fileSize=t.size||2,this.fileTypes=t.types,this.defaultUrl=t.defaultUrl,this.initElement(),this.initEvent())}var t,n,o;return t=e,(n=[{key:"initElement",value:function(){var e="".concat((new Date).getTime(),"-").concat(parseInt(100*Math.random())),t='\n      <div class="tanmer-upload__inner" id="upload-content-'.concat(e,'">\n        <input id="input-file-').concat(e,'" class="d-none" type="file" accept="').concat(this.fileTypes&&this.fileTypes.join(", ")||"*",'">\n        <label for="input-file-').concat(e,'" class="tanmer-upload__button_select">\n          +\n        </label>\n        <div class=\'tanmer-upload__button_clear\'>\n          <svg t="1569318188654" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3370" width="16" height="16"><path d="M882.048 209.216L209.28 882.048c-18.624 18.56-48.768 18.56-67.328 0s-18.56-48.704 0-67.328L814.72 141.952c18.624-18.56 48.768-18.56 67.328 0 18.56 18.56 18.56 48.704 0 67.264z" fill="" p-id="3371"></path><path d="M882.048 882.048c-18.56 18.56-48.704 18.56-67.328 0L141.952 209.216c-18.56-18.624-18.56-48.704 0-67.264 18.56-18.56 48.704-18.56 67.328 0L882.048 814.72c18.56 18.624 18.56 48.768 0 67.328z" p-id="3372"></path></svg>\n        </div>\n      </div>\n    ');this.target.addClass("tanmer-upload").empty().append(t),this.setPreview(this.defaultUrl)}},{key:"initEvent",value:function(){var e=this;this.target.find("input[type='file']").on("change",(function(t){var n=t.target,a=n.files&&n.files[0];return a&&a.size>0?a.size/1024/1024>e.fileSize?($(n).val(null),alert("\u4e0a\u4f20\u6587\u4ef6\u9650\u5236\u4e0d\u80fd\u8d85\u8fc7".concat(e.fileSize,"M\uff01")),!1):(e.uploader&&e.uploader.destroy(),e.uploader=new i.a({file:a,tokenUrl:window.location.origin+"/uploads/token",beforeSend:e._beforeSend.bind(e),progress:e._setProgress.bind(e),success:e._uploadFileSuccess.bind(e),failed:e._uploadFileFailed.bind(e),complete:e._uploadFileComplete.bind(e)}),void e.target.find(".progress").removeClass("d-none").show()):($(n).val(null),!1)})),this.target.find(".tanmer-upload__button_clear").on("click",(function(){e.uploader&&e.uploader.destroy(),e.target.find(".progress").remove(),e.setPreview(""),e.destroy&&e.destroy()}))}},{key:"setDefault",value:function(e){this.defaultUrl=e,this.setPreview(this.defaultUrl)}},{key:"_beforeSend",value:function(e){var t=this;if(e&&e.size/1024/1024<=10&&e.type.match("^image/")){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=e.target.result;t.setPreview(n)}}}},{key:"_setProgress",value:function(e){var t=this.target.find(".tanmer-upload__inner");if(t.has(".progress").length>0)t.find(".progress .progress-bar").css({width:e+"%"}),t.find(".progress .progress-bar").attr("aria-valuenow",e).text(e+"%");else{var n='\n        <div class="progress">\n          <div class="progress-bar" role="progressbar" style="width: '.concat(e,'%;" aria-valuenow="').concat(e,'" aria-valuemin="0" aria-valuemax="100">').concat(e,"%</div>\n        </div>\n      ");t.append(n)}}},{key:"setPreview",value:function(e){this.target.find(".tanmer-upload__inner").css({"background-image":"url('".concat(e,"')")})}},{key:"_uploadFileSuccess",value:function(e){var t=e.url,n=e.encryped_id;this.setPreview(t),this.success(t,n)}},{key:"_uploadFileFailed",value:function(){alert("\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\uff0c\u5237\u65b0\u540e\u91cd\u8bd5\uff01")}},{key:"_uploadFileComplete",value:function(){this.target.find(".progress").remove()}}])&&a(t.prototype,n),o&&a(t,o),e}();t.a=o},387:function(e,t){e.exports=jQuery},42:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t.file,this.tokenUrl=t.tokenUrl,this.progress=t.progress||function(){},this.success=t.success||function(){},this.failed=t.failed||function(){},this.complete=t.complete||function(){},this.beforeSend=t.beforeSend||function(){},this.destroyed=!1,this.uploadStart(t.file)}var t,n,a;return t=e,(n=[{key:"uploadStart",value:function(e){this.beforeSend(e,e.name),this.getUploadToken(e)}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"getUploadToken",value:function(e){var t=this;$.ajax({url:this.tokenUrl,method:"post",data:{file_name:e.name},success:function(n){if(!t.destroyed){var i=n&&n.token,a=n&&n.uploadFileName;i?t.uploadFile(e,n.uploadHost,i,a):t.failed({error:n?n.error:"get token error",response:n})}},error:function(e){t.destroyed||t.failed({error:"get token error",response:e})}})}},{key:"uploadFile",value:function(e,t,n,i){var a,o,s,r=this,l=t||"http://up-z2.qiniup.com",c=new XMLHttpRequest;c.open("POST",l,!0),(a=new FormData).append("key",i),a.append("token",n),a.append("file",e),c.upload.addEventListener("progress",(function(e){if(!r.destroyed&&e.lengthComputable){var t=(new Date).getTime();s=t-o;var n=e.loaded/1024/(s/1e3);n>1024?(n/1024).toFixed(2):n.toFixed(2);var i=Math.round(100*e.loaded/e.total);r.progress(i)}}),!1),c.onreadystatechange=function(e){if(!r.destroyed){if(4==c.readyState&&200==c.status&&""!=c.responseText){var t=JSON.parse(c.responseText);r.success(t)}else 200!=c.status&&c.responseText&&(t=JSON.parse(c.responseText),r.failed());r.complete()}},o=(new Date).getTime(),c.send(a)}}])&&i(t.prototype,n),a&&i(t,a),e}();t.a=a},98:function(e,t,n){"use strict";var i=n(34);n.n(i).a},99:function(e,t,n){"use strict";var i=n(35);n.n(i).a}},[[1223,7,0]]]);
//# sourceMappingURL=frontend-eb84727d5dfb124b74b7.chunk.js.map